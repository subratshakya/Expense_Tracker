declare module 'mongoose' {

<<<<<<< HEAD
  type SchemaValidator<T> = RegExp | [RegExp, string] | Function | [Function, string] | ValidateOpts<T> | ValidateOpts<T>[];
=======
  type SchemaValidator<T, EnforcedDocType> = RegExp | [RegExp, string] | Function | [Function, string] | ValidateOpts<T, EnforcedDocType> | ValidateOpts<T, EnforcedDocType>[];
>>>>>>> d9b5d8d4d7e7782577668ed9860ec566a14c8070

  interface ValidatorProps {
    path: string;
    fullPath: string;
    value: any;
<<<<<<< HEAD
=======
    reason?: Error;
>>>>>>> d9b5d8d4d7e7782577668ed9860ec566a14c8070
  }

  interface ValidatorMessageFn {
    (props: ValidatorProps): string;
  }

<<<<<<< HEAD
  interface ValidateFn<T> {
    (value: T, props?: ValidatorProps & Record<string, any>): boolean;
  }

  interface LegacyAsyncValidateFn<T> {
    (value: T, done: (result: boolean) => void): void;
  }

  interface AsyncValidateFn<T> {
    (value: T, props?: ValidatorProps & Record<string, any>): Promise<boolean>;
  }

  interface ValidateOpts<T> {
    msg?: string;
    message?: string | ValidatorMessageFn;
    type?: string;
    validator: ValidateFn<T> | LegacyAsyncValidateFn<T> | AsyncValidateFn<T>;
=======
  type ValidateFn<T, EnforcedDocType> =
    (this: EnforcedDocType, value: any, props?: ValidatorProps & Record<string, any>) => boolean;

  type AsyncValidateFn<T, EnforcedDocType> =
    (this: EnforcedDocType, value: any, props?: ValidatorProps & Record<string, any>) => Promise<boolean>;

  interface ValidateOpts<T, EnforcedDocType> {
    msg?: string;
    message?: string | ValidatorMessageFn;
    type?: string;
    validator: ValidateFn<T, EnforcedDocType>
    | AsyncValidateFn<T, EnforcedDocType>;
>>>>>>> d9b5d8d4d7e7782577668ed9860ec566a14c8070
    propsParameter?: boolean;
  }
}
